import{n as e,o as a,c as t,w as i,i as s,a as l,b as o,q as r,e as c,d as n,t as m,s as d,I as u,f as h,u as p,v as f}from"./index-c25d265a.js";import{a as g}from"./axios.5ae1da96.js";import{_ as b}from"./_plugin-vue_export-helper.1b428a4d.js";const v=b({data:()=>({formData:{email:"",username:"",password:"",confirm:"",verification:""},active:!0,getCodeText:"获取验证码",trueEmail:!0,code:"",check:!1,visible1:!1,visible2:!1}),computed:{isFill(){return this.trueEmail&&""!==this.formData.username&&""!==this.formData.password&&""!==this.formData.confirm&&""!==this.formData.verification},enableGetcode(){return this.trueEmail&&this.active},isSame(){return this.formData.password==this.formData.confirm}},methods:{submitForm(){g.post("https://metaq.scutbot.icu/checkcode",{email:this.formData.email,code:this.formData.verification}).then((e=>{1==e.data?g.post("https://metaq.scutbot.icu/register",{username:this.formData.username,email:this.formData.email,password:this.formData.password}).then((e=>{this.token=e.data,console.log(this.token)})).catch((e=>{console.log(e)})):alert("验证码错误!")})).catch((e=>{console.log(e)}))},changeView1(){this.visible1=!this.visible1},changeView2(){this.visible2=!this.visible2},Login(){e({url:"/pages/login/login"})},startTime(){if(this.enableGetcode&&this.check){g.post("https://metaq.scutbot.icu/sendcode",{email:this.formData.email}).then((e=>{0==e.data&&alert("获取验证码失败!")})).catch((e=>{console.log(e)}));var e=30;this.active=!1,this.getCodeText=e;const a=setInterval((()=>{0===--e?(clearInterval(a),this.active=!0,this.getCodeText="获取验证码"):this.getCodeText=e}),1e3)}},checkEmail(){this.check=!0;this.trueEmail=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(this.formData.email)}}},[["render",function(e,g,b,v,D,k){const w=s,V=d,_=u,x=h,C=p,I=f;return a(),t(w,null,{default:i((()=>[l(w,{class:"bg"},{default:i((()=>[l(w,{class:"title"},{default:i((()=>[o(" Register ")])),_:1}),l(I,{class:"Form"},{default:i((()=>[r("div",{class:"Input-margin"},[l(V,{class:"label"},{default:i((()=>[o("用户名：")])),_:1}),l(_,{type:"text",placeholder:"请输入用户名",maxlength:"14",class:"Input",modelValue:D.formData.username,"onUpdate:modelValue":g[0]||(g[0]=e=>D.formData.username=e),required:""},null,8,["modelValue"])]),r("div",{class:c({"Input-margin":D.trueEmail,errorWrite:!D.trueEmail})},[l(V,{class:"label"},{default:i((()=>[o("邮箱：")])),_:1}),l(_,{type:"email",placeholder:"请输入邮箱",maxlength:"20",class:"Input",modelValue:D.formData.email,"onUpdate:modelValue":g[1]||(g[1]=e=>D.formData.email=e),onInput:k.checkEmail,required:""},null,8,["modelValue","onInput"])],2),r("div",{class:c({"Input-margin":k.isSame,errorWrite:!k.isSame})},[l(V,{class:"label"},{default:i((()=>[o("密码：")])),_:1}),l(_,{type:this.visible1?"text":"password",maxlength:"16",placeholder:"请输入密码",class:"Input",modelValue:D.formData.password,"onUpdate:modelValue":g[2]||(g[2]=e=>D.formData.password=e),required:""},null,8,["type","modelValue"]),l(x,{class:"img",src:this.visible1?"../../static/login/avisible.png":"../../static/login/invisible.png",onClick:k.changeView1},null,8,["src","onClick"])],2),r("div",{class:c({"Input-margin":k.isSame,errorWrite:!k.isSame})},[l(V,{class:"confirm_label"},{default:i((()=>[o("确认密码：")])),_:1}),l(_,{class:"confirm_input",type:this.visible2?"text":"password",maxlength:"16",placeholder:"请再次输入密码",modelValue:D.formData.confirm,"onUpdate:modelValue":g[3]||(g[3]=e=>D.formData.confirm=e),required:""},null,8,["type","modelValue"]),l(x,{class:"img",src:this.visible2?"../../static/login/avisible.png":"../../static/login/invisible.png",onClick:k.changeView2},null,8,["src","onClick"])],2),r("div",{id:"gbutton"},[r("div",{id:"getcode"},[l(V,{class:"label"},{default:i((()=>[o("验证码：")])),_:1}),l(_,{type:"text",placeholder:"请输入验证码",class:"Input",modelValue:D.formData.verification,"onUpdate:modelValue":g[4]||(g[4]=e=>D.formData.verification=e),required:""},null,8,["modelValue"])]),l(w,{style:n({"background-color":D.active?"rgba(255,255,255,0.8)":"rgba(208, 202, 217, 1)"}),onClick:k.startTime},{default:i((()=>[o(m(D.getCodeText),1)])),_:1},8,["style","onClick"])]),r("div",{class:"buttonGroup"},[l(C,{class:c({active:k.isFill,inactive:!k.isFill}),disabled:!k.isFill,type:"submit",onClick:k.submitForm},{default:i((()=>[o("注册")])),_:1},8,["class","disabled","onClick"]),l(C,{onClick:k.Login,class:"link"},{default:i((()=>[o("已有账户？立即登录")])),_:1},8,["onClick"])])])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-bb616588"]]);export{v as default};
