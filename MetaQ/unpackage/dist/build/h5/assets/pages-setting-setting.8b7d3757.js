import{s as e,o as t,j as s,b as a,w as l,d as i,t as n,c as o,F as c,k as u,G as r,i as d,P as h,L as m,n as f,m as g,l as p,u as _}from"./index-db74daea.js";import{T}from"./tabbar.13d69755.js";import{_ as k}from"./_plugin-vue_export-helper.1b428a4d.js";import"./duoxuanAnswer.0b2ac52f.js";import"./uni-app.es.176bdeef.js";import"./components-answerQuestion-calendarSeleteAnswer-calendarSeleteAnswer.af3f5d9d.js";import"./style.0b7734ec.js";const v=k({data(){const e=new Date;return{startTime:`${e.getFullYear()}-${e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1}-${e.getDate()<10?"0"+e.getDate():e.getDate()} ${e.getHours()<10?"0"+e.getHours():e.getHours()}:${e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes()}`,endTime:"无截止时间",showPicker:!1,isStartTime:!0,years:[],months:[],days:[],hours:[],minutes:[],prevValue:[0,0,0,0,0,0],value:[0,0,0,0,0,0]}},mounted(){this.initPickerData()},emits:["getTime"],methods:{emitTime(){this.$emit("getTime",{startTime:this.startTime,endTime:this.endTime})},getDaysInMonth:(e,t)=>new Date(e,t,0).getDate(),initPickerData(){const e=(new Date).getFullYear();let t=[];for(let c=e;c<=e+10;c++)t.push(c);let s=[];for(let c=1;c<=12;c++)s.push(c<10?"0"+c:c);const a=this.years[this.value[0]],l=this.months[this.value[1]];this.getDaysInMonth(a,l);let i=[];for(let c=1;c<=31;c++)i.push(c<10?"0"+c:c);let n=[];for(let c=0;c<24;c++)n.push(c<10?"0"+c:c);let o=[];for(let c=0;c<60;c++)o.push(c<10?"0"+c:c);this.years=t,this.months=s,this.days=i,this.hours=n,this.minutes=o},showStartTimePicker(){this.updatePickerValue(this.startTime),this.showPicker=!0,this.isStartTime=!0},showEndTimePicker(){this.showPicker=!0,this.isStartTime=!1,"无截止时间"!==this.endTime?this.updatePickerValue(this.endTime):(this.updatePickerValue(this.startTime),this.value=[...this.value,0])},updatePickerValue(e){if("无截止时间"===e)return void(this.value=[0,0,0,0,0,0]);const[t,s,a,l,i]=e.split(/[- :]/).map((e=>parseInt(e))),n=this.years.indexOf(t),o=this.months.indexOf(s<10?"0"+s:parseInt(s)),c=this.days.indexOf(a<10?"0"+a:parseInt(a)),u=this.hours.indexOf(l<10?"0"+l:parseInt(l)),r=this.minutes.indexOf(i<10?"0"+i:parseInt(i)),d=this.value[5];this.value=[n,o,c,u,r,d]},cancel(){this.showPicker=!1},confirm(){if(this.isStartTime||0!==this.value[5]){let t=`${this.years[this.value[0]]}-${this.months[this.value[1]]}-${this.days[this.value[2]]} ${this.hours[this.value[3]]}:${this.minutes[this.value[4]]}`;if(this.isStartTime){let e=new Date(t),s="无截止时间"!==this.endTime?new Date(this.endTime):null;s&&e.getTime()>s.getTime()&&(this.endTime="无截止时间",this.emitTime()),this.startTime=t,this.emitTime()}else{let s=new Date(this.startTime),a=new Date(t);s.getTime()<a.getTime()?(this.endTime=t,this.emitTime()):(this.value[5]=0,e({title:"结束时间不能比开始时间早",icon:"none"}))}}else this.endTime="无截止时间",this.emitTime();this.showPicker=!1},onChange(e){if(this.prevValue=this.value,this.isStartTime||0!==e.detail.value[5]||0!==this.value[5]){if(this.value=e.detail.value,this.value[0]!==this.prevValue[0]||this.value[1]!==this.prevValue[1]){const e=this.years[this.value[0]],t=this.months[this.value[1]],s=this.getDaysInMonth(e,t);let a=[];for(let l=1;l<=s;l++)a.push(l<10?"0"+l:l);this.days=a}}else this.value=[...this.value,0]}}},[["render",function(e,f,g,p,_,T){const k=d,v=h,C=m;return t(),s(c,null,[a(k,{class:"contentBox"},{default:l((()=>[a(k,{class:"startTime",onClick:T.showStartTimePicker},{default:l((()=>[a(k,{class:"time"},{default:l((()=>[i(" 开始时间: "+n(_.startTime),1)])),_:1}),a(k,{class:"icon"},{default:l((()=>[i(" > ")])),_:1})])),_:1},8,["onClick"]),a(k,{class:"endTime",onClick:T.showEndTimePicker},{default:l((()=>[a(k,{class:"time"},{default:l((()=>[i(" 结束时间: "+n(_.endTime),1)])),_:1}),a(k,{class:"icon"},{default:l((()=>[i(" > ")])),_:1})])),_:1},8,["onClick"])])),_:1}),_.showPicker?(t(),o(k,{key:0,class:"picker"},{default:l((()=>[a(k,{class:"mask"}),a(k,{class:"picker-content"},{default:l((()=>[a(k,{class:"btns"},{default:l((()=>[a(k,{class:"btn",onClick:T.cancel},{default:l((()=>[i("取消")])),_:1},8,["onClick"]),a(k,{class:"btn",onClick:T.confirm},{default:l((()=>[i("确定")])),_:1},8,["onClick"])])),_:1}),a(C,{class:"picker-view",value:_.value,onChange:T.onChange},{default:l((()=>[a(v,null,{default:l((()=>[(t(!0),s(c,null,u(_.years,((e,s)=>(t(),o(k,{key:s},{default:l((()=>[i(n(e),1)])),_:2},1024)))),128))])),_:1}),a(v,null,{default:l((()=>[(t(!0),s(c,null,u(_.months,((e,s)=>(t(),o(k,{key:s},{default:l((()=>[i(n(e),1)])),_:2},1024)))),128))])),_:1}),a(v,null,{default:l((()=>[(t(!0),s(c,null,u(_.days,((e,s)=>(t(),o(k,{key:s},{default:l((()=>[i(n(e),1)])),_:2},1024)))),128))])),_:1}),a(v,null,{default:l((()=>[(t(!0),s(c,null,u(_.hours,((e,s)=>(t(),o(k,{key:s},{default:l((()=>[i(n(e),1)])),_:2},1024)))),128))])),_:1}),a(v,null,{default:l((()=>[(t(!0),s(c,null,u(_.minutes,((e,s)=>(t(),o(k,{key:s},{default:l((()=>[i(n(e),1)])),_:2},1024)))),128))])),_:1}),_.isStartTime?r("",!0):(t(),o(v,{key:0,class:"endBox"},{default:l((()=>[a(k,null,{default:l((()=>[i("无截止时间")])),_:1}),a(k,null,{default:l((()=>[i("选择截止时间")])),_:1})])),_:1}))])),_:1},8,["value","onChange"])])),_:1})])),_:1})):r("",!0)],64)}],["__scopeId","data-v-e47779f1"]]),C=""+new URL("profilePhoto-772bf1cf.png",import.meta.url).href;const x=k({components:{TabBar:T,Time:v},data:()=>({tab:"setting",startTime:"",endTime:"",selected:[!1,!1,!1],roles:["管理者","编辑者","查看者"],selectedRole:0}),methods:{getTime(e){this.startTime=e.startTime,this.endTime=e.endTime},goback(){f({url:"/pages/editQuestionnire/editQuestionnire"})},toggleSelect(e){this.selected.splice(e,1,!this.selected[e])},roleChanged(e){this.selectedRole=e.target.value}}},[["render",function(e,s,c,u,r,h){const m=g("Time"),f=p,T=d,k=_,v=g("tab-bar");return t(),o(T,{class:"background"},{default:l((()=>[a(m,{onGetTime:h.getTime},null,8,["onGetTime"]),a(T,{class:"contentBox response"},{default:l((()=>[a(T,{class:"select",onClick:s[0]||(s[0]=e=>h.toggleSelect(0))},{default:l((()=>[a(f,{src:r.selected[0]?"/static/setting/selected.png":"/static/setting/noSelected.png",class:"icon"},null,8,["src"]),a(T,{class:"text"},{default:l((()=>[i("记录用户昵称")])),_:1})])),_:1}),a(T,{class:"select",onClick:s[1]||(s[1]=e=>h.toggleSelect(1))},{default:l((()=>[a(f,{src:r.selected[1]?"/static/setting/selected.png":"/static/setting/noSelected.png",class:"icon"},null,8,["src"]),a(T,{class:"text"},{default:l((()=>[i("此问卷提交后是否能更改答案")])),_:1})])),_:1}),a(T,{class:"select",onClick:s[2]||(s[2]=e=>h.toggleSelect(2))},{default:l((()=>[a(f,{src:r.selected[2]?"/static/setting/selected.png":"/static/setting/noSelected.png",class:"icon"},null,8,["src"]),a(T,{class:"text"},{default:l((()=>[i("积分奖励（待开发）")])),_:1})])),_:1})])),_:1}),a(T,{class:"contentBox authority"},{default:l((()=>[a(T,{class:"title"},{default:l((()=>[i(" 权限管理 ")])),_:1}),a(T,{class:"scrollBox"},{default:l((()=>[a(T,{class:"peopleBox"},{default:l((()=>[a(T,{class:"infoBox"},{default:l((()=>[a(T,{class:"img"},{default:l((()=>[a(f,{src:C,mode:"aspectFill"})])),_:1}),a(T,{class:"name"},{default:l((()=>[i(" 尘 ")])),_:1})])),_:1}),a(T,{class:"rightBox"},{default:l((()=>[a(k,{mode:"selector",range:r.roles,onChange:h.roleChanged},{default:l((()=>[a(T,{class:"picker"},{default:l((()=>[i(n(r.roles[r.selectedRole]),1)])),_:1})])),_:1},8,["range","onChange"])])),_:1})])),_:1}),a(T,{class:"peopleBox"},{default:l((()=>[a(T,{class:"infoBox"},{default:l((()=>[a(T,{class:"img"},{default:l((()=>[a(f,{src:C,mode:"aspectFill"})])),_:1}),a(T,{class:"name"},{default:l((()=>[i(" 尘 ")])),_:1})])),_:1}),a(T,{class:"rightBox"},{default:l((()=>[a(k,{mode:"selector",range:r.roles,onChange:h.roleChanged},{default:l((()=>[a(T,{class:"picker"},{default:l((()=>[i(n(r.roles[r.selectedRole]),1)])),_:1})])),_:1},8,["range","onChange"])])),_:1})])),_:1}),a(T,{class:"peopleBox"},{default:l((()=>[a(T,{class:"infoBox"},{default:l((()=>[a(T,{class:"img"},{default:l((()=>[a(f,{src:C,mode:"aspectFill"})])),_:1}),a(T,{class:"name"},{default:l((()=>[i(" 尘 ")])),_:1})])),_:1}),a(T,{class:"rightBox"},{default:l((()=>[a(k,{mode:"selector",range:r.roles,onChange:h.roleChanged},{default:l((()=>[a(T,{class:"picker"},{default:l((()=>[i(n(r.roles[r.selectedRole]),1)])),_:1})])),_:1},8,["range","onChange"])])),_:1})])),_:1})])),_:1})])),_:1}),a(T,{class:"button",onClick:h.goback},{default:l((()=>[i(" 确认 ")])),_:1},8,["onClick"]),a(v,{tab:r.tab,Type:1},null,8,["tab"])])),_:1})}],["__scopeId","data-v-029ca3df"]]);export{x as default};
