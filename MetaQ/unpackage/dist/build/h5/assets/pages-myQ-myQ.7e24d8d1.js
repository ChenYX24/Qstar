import{o as t,c as e,w as s,b as a,d as l,t as n,e as o,f as i,i as u,n as c,r,g as d,S as h,h as p,j as m,k as f,F as b,l as _,I as k,m as g,p as S}from"./index-db74daea.js";import{_ as x}from"./_plugin-vue_export-helper.1b428a4d.js";import{r as y}from"./uni-app.es.176bdeef.js";import{T as C}from"./tabbar.13d69755.js";import{T as B}from"./tabSwiper.f6688827.js";import"./duoxuanAnswer.0b2ac52f.js";import"./components-answerQuestion-calendarSeleteAnswer-calendarSeleteAnswer.af3f5d9d.js";import"./style.0b7734ec.js";const v=x({name:"QBlock",props:{title:{type:String,default:""},onumber:{type:Number,default:1},isPush:{type:Boolean,default:!1}},data:()=>({}),computed:{pushText(){return this.isPush?"已发布":"未发布"},number(){let t=this.onumber.toString().length;return 4==t?Math.floor(this.onumber/1e3)+"K":5==t?Math.floor(this.onumber/1e4)+"W":t>5?"9W+":this.onumber},fontSize(){let t=this.number.toString().length;return t<=1?"40pt":2==t?"30pt":t>=3?"24pt":void 0}}},[["render",function(c,r,d,h,p,m){const f=u;return t(),e(f,{class:"Block"},{default:s((()=>[a(f,{class:"topBox"},{default:s((()=>[a(f,{class:"title"},{default:s((()=>[l(n(d.title),1)])),_:1}),a(f,{class:"number",style:o({fontSize:m.fontSize})},{default:s((()=>[l(n(m.number),1)])),_:1},8,["style"])])),_:1}),a(f,{class:"bottomBox"},{default:s((()=>[a(f,{class:"pushBox"},{default:s((()=>[a(f,{class:i({"active-dot":d.isPush,dot:!d.isPush})},null,8,["class"]),a(f,{class:"push"},{default:s((()=>[l(n(m.number),1)])),_:1})])),_:1}),a(f,{class:"text"},{default:s((()=>[l(" 答卷数量 ")])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-3f14a395"]]);const T=x({name:"QBlock",props:{title:{type:String,default:""},isEnd:{type:Boolean,default:!0},name:{type:String,default:""}},data:()=>({pushText:"已发布"}),computed:{end(){return this.isEnd?"已截止":"修改"}}},[["render",function(o,c,r,d,h,p){const m=u;return t(),e(m,{class:"Block"},{default:s((()=>[a(m,{class:"topBox"},{default:s((()=>[a(m,{class:"title"},{default:s((()=>[l(n(r.title),1)])),_:1}),a(m,{class:"check"},{default:s((()=>[l(" 查看 ")])),_:1})])),_:1}),a(m,{class:"bottomBox"},{default:s((()=>[a(m,{class:"endBox"},{default:s((()=>[a(m,{class:i({"active-dot":!r.isEnd,dot:r.isEnd})},null,8,["class"]),a(m,{class:"name"},{default:s((()=>[l(n(r.name),1)])),_:1})])),_:1}),a(m,{class:i({end:r.isEnd,noEnd:!r.isEnd})},{default:s((()=>[l(n(p.end),1)])),_:1},8,["class"])])),_:1})])),_:1})}],["__scopeId","data-v-82b7c8d4"]]);const E=x({name:"QBlock",data:()=>({currentIndex:1}),props:{title:{type:String,default:""},onumber:{type:Number,default:1},isPush:{type:Boolean,default:!1},id:{type:Number,default:-1}},methods:{share(){this.$emit("changeSave"),this.$store.commit("setIsCreate",this.id)},push(){this.$emit("changePush")},toEdit(){this.isPush?c({url:"/pages/analysis/analysis?id="+this.id}):(console.log(132324),console.log("id",this.id),r({url:this.$store.state.host+"/check",method:"POST",header:{"Content-Type":"application/json",token:d("token")},data:{id:this.id},success:t=>{console.log(t.data);var e=t.data.data;this.$store.commit("setIsCreate",this.id),this.$store.commit("setQuestionNire",e),c({url:"/pages/editQuestionnire/editQuestionnire?flag=1"})},fail:()=>{},complete:()=>{}}))},Delete(){}},computed:{pushText(){return 1==this.isPush?"已发布":-1==this.isPush?"已停止发布":"未发布"},number(){let t=this.onumber.toString().length;return 4==t?Math.floor(this.onumber/1e3)+"K":5==t?Math.floor(this.onumber/1e4)+"W":t>5?"9W+":this.onumber},pushText(){return this.isPush?"已发布":"未发布"},fontSize(){let t=this.number.toString().length;return t<=1?"40pt":2==t?"30pt":t>=3?"24pt":void 0}}},[["render",function(c,r,d,m,f,b){const _=u,k=h,g=p;return t(),e(g,{duration:300,current:f.currentIndex},{default:s((()=>[a(k,{class:"share"},{default:s((()=>[d.isPush>0?(t(),e(_,{key:0,class:"alternateView",onClick:b.share},{default:s((()=>[l(" 分享问卷填写 ")])),_:1},8,["onClick"])):(t(),e(_,{key:1,class:"alternateView",onClick:b.push},{default:s((()=>[l(" 点击发布问卷 ")])),_:1},8,["onClick"]))])),_:1}),a(k,{class:"Block",onClick:b.toEdit},{default:s((()=>[a(_,{class:"topBox"},{default:s((()=>[a(_,{class:"title"},{default:s((()=>[l(n(d.title),1)])),_:1}),a(_,{class:"number",style:o({fontSize:b.fontSize})},{default:s((()=>[l(n(b.number),1)])),_:1},8,["style"])])),_:1}),a(_,{class:"bottomBox"},{default:s((()=>[a(_,{class:"pushBox"},{default:s((()=>[a(_,{class:i({"active-dot":d.isPush>0,dot:d.isPush<=0})},null,8,["class"]),a(_,{class:"push"},{default:s((()=>[l(n(b.pushText),1)])),_:1})])),_:1}),a(_,{class:"text"},{default:s((()=>[l("答卷数量")])),_:1})])),_:1})])),_:1},8,["onClick"]),a(k,{class:"share",onClick:b.Delete},{default:s((()=>[a(_,{class:"alternateView"},{default:s((()=>[l(" 删除问卷 ")])),_:1})])),_:1},8,["onClick"])])),_:1},8,["current"])}],["__scopeId","data-v-f8e74d9d"]]);const P=x({name:"QBlock",props:{title:{type:String,default:""},isEnd:{type:Boolean,default:!0},name:{type:String,default:""},ID:{type:Number,default:-1}},data:()=>({pushText:"已发布"}),computed:{end(){return this.isEnd?"已截止":"修改"}},methods:{check(){console.log("myQID:",this.ID),this.$store.commit("setIsCreate",this.ID),c({url:"/pages/fillQuestionnaire/fillQuestionnaire?check=1"})}}},[["render",function(o,c,r,d,h,p){const m=u;return t(),e(m,{class:"Block"},{default:s((()=>[a(m,{class:"topBox"},{default:s((()=>[a(m,{class:"title"},{default:s((()=>[l(n(r.title),1)])),_:1}),a(m,{class:"check",onClick:p.check},{default:s((()=>[l(" 查看 ")])),_:1},8,["onClick"])])),_:1}),a(m,{class:"bottomBox"},{default:s((()=>[a(m,{class:"endBox"},{default:s((()=>[a(m,{class:i({"active-dot":!r.isEnd,dot:r.isEnd})},null,8,["class"]),a(m,{class:"name"},{default:s((()=>[l(n(r.name),1)])),_:1})])),_:1}),a(m,{class:i({end:r.isEnd,noEnd:!r.isEnd})},{default:s((()=>[l(n(p.end),1)])),_:1},8,["class"])])),_:1})])),_:1})}],["__scopeId","data-v-c174f2c0"]]),I=""+new URL("search-74416d4d.png",import.meta.url).href;const w=x({components:{TabBar:C,TabSwiper:B,QBlock:E,QBlock2:P},onLoad:function(t){this.tab=t.tab,this.fetchData()},mounted(){},data:()=>({tab:"",inputValue:"",currentTab:0,text1:"我创建的",text2:"我填写的",isEnd:!0,name:"尘",blocks:[],blocks1:[],isSave:!1}),methods:{changePush(t){this.blocks1[t].commit=1},emitSave(t){(0==t||t)&&console.log(this.blocks1[t].id),this.isSave=!this.isSave},checkFill(t){},async fetchData(){r({url:this.$store.state.host+"/getCreated",method:"GET",header:{"Content-Type":"application/json",token:d("token")},success:t=>{console.log(t.data),this.blocks1=t.data.data,console.log("blocks1",this.blocks1),console.log(t)},fail:t=>{},complete:()=>{}}),r({url:this.$store.state.host+"/fillRecord",method:"GET",header:{"Content-Type":"application/json",token:d("token")},success:t=>{console.log("已经填写过的问卷",t.data),this.blocks=t.data.data,console.log("blocks",this.blocks)},fail:t=>{},complete:()=>{}})},swiperChange(t){this.currentTab=t.detail.current,this.inputValue=""},handleTabChange(t){this.currentTab=t},test(t){console.log(t.target)}},computed:{myCreateds(){return this.inputValue&&0===this.currentTab?this.blocks1.filter((t=>t.title.includes(this.inputValue))):this.blocks1},myFilleds(){return this.inputValue&&1==this.currentTab?this.blocks.filter((t=>t.title.includes(this.inputValue)||t.creator.includes(this.inputValue))):this.blocks}}},[["render",function(n,o,i,c,r,d){const x=u,C=_,B=k,E=g("tab-swiper"),P=y(S("QBlock"),v),w=h,Q=y(S("QBlock2"),T),V=p,j=g("tab-bar");return t(),e(x,{class:"background"},{default:s((()=>[a(x,{class:"title"},{default:s((()=>[l(" 我的问卷 ")])),_:1}),a(x,{class:"inputBox"},{default:s((()=>[a(C,{src:I,mode:"aspectFill"}),a(B,{type:"text",placeholder:"输入关键词",class:"input","placeholder-style":"color: rgba(187, 187, 199, 1);;",modelValue:r.inputValue,"onUpdate:modelValue":o[0]||(o[0]=t=>r.inputValue=t)},null,8,["modelValue"])])),_:1}),a(x,{class:"container"},{default:s((()=>[a(E,{class:"tabSwiper",onTabChange:d.handleTabChange,"current-tab":r.currentTab,text1:r.text1,text2:r.text2},null,8,["onTabChange","current-tab","text1","text2"]),a(V,{current:r.currentTab,onChange:d.swiperChange,duration:300,class:"swiper"},{default:s((()=>[a(w,null,{default:s((()=>[a(x,{class:"page1"},{default:s((()=>[(t(!0),m(b,null,f(d.myCreateds,((s,a)=>(t(),e(P,{key:s.id,onumber:s.filled,title:s.title,isPush:s.commit,onChangeSave:t=>d.emitSave(a),onChangePush:t=>d.changePush(a),id:s.id},null,8,["onumber","title","isPush","onChangeSave","onChangePush","id"])))),128))])),_:1})])),_:1}),a(w,null,{default:s((()=>[a(x,{class:"page2"},{default:s((()=>[(t(!0),m(b,null,f(d.myFilleds,(s=>(t(),e(Q,{ID:s.id,title:s.title,isEnd:s.committed,name:s.creator,onClick:t=>d.checkFill(s.id)},null,8,["ID","title","isEnd","name","onClick"])))),256))])),_:1})])),_:1})])),_:1},8,["current","onChange"])])),_:1}),a(j,{tab:r.tab,outIsSave:r.isSave,onChangeSave:d.emitSave},null,8,["tab","outIsSave","onChangeSave"])])),_:1})}],["__scopeId","data-v-6ef09f03"]]);export{w as default};
