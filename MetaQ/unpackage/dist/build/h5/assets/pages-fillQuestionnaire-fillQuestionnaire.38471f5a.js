import{r as e,g as t,n as s,a,o,c as n,w as i,i as l,b as c,j as r,k as d,F as u,d as h,E as p,p as m}from"./index-db74daea.js";import{d as g,t as f,h as w,a as k}from"./duoxuanAnswer.0b2ac52f.js";import q from"./components-answerQuestion-calendarSeleteAnswer-calendarSeleteAnswer.af3f5d9d.js";import{_}from"./_plugin-vue_export-helper.1b428a4d.js";import"./uni-app.es.176bdeef.js";import"./style.0b7734ec.js";const N=_({components:{danxuanAnswer:g,tiankongAnswer:f,huadongtiaoAnswer:w,duoxuanAnswer:k,riqiAnswer:q},onLoad:function(a){if(console.log("options.id:",a.id),console.log("options.check:",a.check),a.id){e({url:this.$store.state.host+"/isLogin",method:"POST",header:{"Content-Type":"application/json",token:t("token")},success:e=>{console.log("isLogin:",e.data),"false"==e.data.msg&&s({url:"/pages/login/login?flag=true"})},fail:()=>{},complete:()=>{}});var o={id:a.id,commit:!1};e({url:this.$store.state.host+"/fill",method:"POST",header:{"Content-Type":"application/json",token:t("token")},data:o,success:e=>{console.log("fill:",e.data),this.questionNaire=e.data.data,this.ID=e.data.data.id},fail:()=>{},complete:()=>{}}),this.id=a.id,this.answerTemp=Array.from({length:this.questionNaire.content.length},(()=>""))}else a.check&&(console.log("asdjaklsjdlkasjdlk"),this.ID=this.$store.state.qnid,console.log("ID:",this.ID),e({url:this.$store.state.host+"/checkFill",method:"POST",header:{"Content-Type":"application/json",token:t("token")},data:{id:this.ID},success:e=>{console.log("checkfill:",e.data),this.answerTemp=e.data.data.filled,this.questionNaire=e.data.data.check,this.id=e.data.data.id},fail:()=>{},complete:()=>{}}))},data:()=>({answerTemp:["0","012","太好了，没有建议","10",""],answer:[],ID:-1,id:-1,componentName:["danxuanAnswer","duoxuanAnswer","tiankongAnswer","huadongtiaoAnswer","","riqiAnswer"],questionNaire:{title:"关于生活中常用的问卷系统的使用情况以及喜爱程度的调查",description:"请大家认真填写，谢谢大家！",content:[{choice:["MetaQ","问卷星","星问卷","QStar"],question:"你最喜欢哪个问卷系统",type:"SINGLE"},{choice:["外观","功能","便捷"],question:"你喜欢什么方面",type:"MULTIPLE"},{choice:[],question:"有什么建议吗",type:"BLANK"},{choice:[0,"","10","",0],question:"评个分吧",type:"SLIDE"},{choice:0,question:"什么时候使用最频繁",type:"DATE"}]}}),methods:{getT(){console.log(this.answerTemp)},autoChange(e){document.getElementById(e.currentTarget.id).style.height=`${e.detail.height}px`},chooseComponent(e){switch(this.questionNaire.content[e].type){case"SINGLE":return this.componentName[0];case"MULTIPLE":return this.componentName[1];case"BLANK":return this.componentName[2];case"SLIDE":return this.componentName[3];case"PHONE":return this.componentName[4];case"DATE":return this.componentName[5]}},submitSuccess(s){this.$refs.questionAnswerRef.forEach((e=>{this.answer.push(e.answer)})),localStorage.getItem("token");var o={filledID:this.ID,data:this.answer,commit:s,id:this.id};console.log(o),console.log(this.answer),e({url:this.$store.state.host+"/saveFill",method:"POST",header:{"Content-Type":"application/json",token:t("token")},data:o,success:e=>{console.log(e.data),a({url:"/pages/myQ/myQ"})},fail:()=>{},complete:()=>{}})}}},[["render",function(e,t,s,a,g,f){const w=p,k=l;return o(),n(k,{class:"background"},{default:i((()=>[c(k,{class:"questionnire_page",id:"questionnire_page"},{default:i((()=>[c(k,{class:"input_class",id:"input_class_block"},{default:i((()=>[c(k,{class:"textarea_border"},{default:i((()=>[c(w,{maxlength:"900",id:"title",placeholder:"请输入问卷标题",onLinechange:f.autoChange,modelValue:g.questionNaire.title,"onUpdate:modelValue":t[0]||(t[0]=e=>g.questionNaire.title=e),disabled:""},null,8,["onLinechange","modelValue"])])),_:1}),c(k,{class:"textarea_border"},{default:i((()=>[c(w,{maxlength:"900",id:"descripition",placeholder:"请输入问卷简介",onLinechange:f.autoChange,modelValue:g.questionNaire.description,"onUpdate:modelValue":t[1]||(t[1]=e=>g.questionNaire.description=e),disabled:""},null,8,["onLinechange","modelValue"])])),_:1})])),_:1}),(o(!0),r(u,null,d(g.questionNaire.content,((e,t)=>(o(),n(k,{class:"question-all",key:t},{default:i((()=>[(o(),n(m(f.chooseComponent(t)),{ref_for:!0,ref:"questionAnswerRef",num:(t+1).toString(),content:e,answerProps:g.answerTemp[t]},null,8,["num","content","answerProps"]))])),_:2},1024)))),128)),c(k,{class:""},{default:i((()=>[c(k,{class:"block"})])),_:1}),c(k,{class:""},{default:i((()=>[c(k,{class:"submit",onClick:t[2]||(t[2]=e=>f.submitSuccess(!1))},{default:i((()=>[h(" 保存 ")])),_:1}),c(k,{class:"submit",onClick:t[3]||(t[3]=e=>f.submitSuccess(!0))},{default:i((()=>[h(" 提交 ")])),_:1})])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-d8f6843c"]]);export{N as default};
