import{r as e,g as a,s as t,n as i,o as s,c as l,w as o,i as n,b as r,d as c,z as d,f as m,e as u,t as h,A as p,I as f,l as g,B as v,C as b}from"./index-db74daea.js";import{_ as k}from"./_plugin-vue_export-helper.1b428a4d.js";const w=k({data:()=>({formData:{email:"",password:"",confirm:"",verification:""},active:!0,getCodeText:"获取验证码",trueEmail:!0,code:"123456",success:"",check:!1,visible1:!1,visible2:!1}),computed:{isFill(){return this.trueEmail&&""!==this.formData.username&&""!==this.formData.password&&""!==this.formData.confirm&&""!==this.formData.verification},enableGetcode(){return this.trueEmail&&this.active},isSame(){return this.formData.password==this.formData.confirm}},methods:{changepasswd(){e({url:this.$store.state.host+"/checkcode",method:"POST",header:{"Content-Type":"application/json",token:a("token")},data:{email:this.formData.email,code:this.formData.verification},success:s=>{1==s.data?e({url:this.$store.state.host+"/findpasswd",method:"POST",header:{"Content-Type":"application/json",token:a("token")},data:{email:this.formData.email,password:this.formData.password},success:e=>{console.log("响应值",response.data),1==e.data?(t({title:"修改密码成功",icon:"none"}),i({url:"/pages/login/login"})):t({title:"修改密码失败",icon:"none"})},fail:()=>{},complete:()=>{}}):t({title:"验证码错误",icon:"none"})},fail:()=>{},complete:()=>{}})},Login(){i({url:"/pages/login/login"})},startTime(){if(this.enableGetcode&&this.check){e({url:this.$store.state.host+"/sendcode",method:"POST",header:{"Content-Type":"application/json",token:a("token")},data:{email:this.formData.email},success:e=>{0==e.data&&t({title:"获取验证码失败",icon:"none"})},fail:()=>{},complete:()=>{}});var i=30;this.active=!1,this.getCodeText=i;const s=setInterval((()=>{0===--i?(clearInterval(s),this.active=!0,this.getCodeText="获取验证码"):this.getCodeText=i}),1e3)}},changeView1(){this.visible1=!this.visible1},changeView2(){this.visible2=!this.visible2},checkEmail(){this.check=!0;this.trueEmail=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(this.formData.email)}}},[["render",function(e,a,t,i,k,w){const D=n,C=p,_=f,V=g,x=v,T=b;return s(),l(D,null,{default:o((()=>[r(D,{class:"bg"},{default:o((()=>[r(D,{class:"title"},{default:o((()=>[c(" FindPasswd ")])),_:1}),r(T,{class:"Form"},{default:o((()=>[d("div",{class:m({"Input-margin":k.trueEmail,errorWrite:!k.trueEmail})},[r(C,{class:"label"},{default:o((()=>[c("邮箱：")])),_:1}),r(_,{type:"email",placeholder:"请输入邮箱",maxlength:"20",class:"Input",modelValue:k.formData.email,"onUpdate:modelValue":a[0]||(a[0]=e=>k.formData.email=e),onInput:w.checkEmail,required:""},null,8,["modelValue","onInput"])],2),d("div",{class:m({"Input-margin":w.isSame,errorWrite:!w.isSame})},[r(C,{class:"label"},{default:o((()=>[c("密码：")])),_:1}),r(_,{type:this.visible1?"text":"password",maxlength:"16",placeholder:"请输入密码",class:"Input",modelValue:k.formData.password,"onUpdate:modelValue":a[1]||(a[1]=e=>k.formData.password=e),required:""},null,8,["type","modelValue"]),r(V,{class:"img",src:this.visible1?"../../static/login/avisible.png":"../../static/login/invisible.png",onClick:w.changeView1},null,8,["src","onClick"])],2),d("div",{class:m({"Input-margin":w.isSame,errorWrite:!w.isSame})},[r(C,{class:"confirm_label"},{default:o((()=>[c("确认密码：")])),_:1}),r(_,{class:"confirm_input",type:this.visible2?"text":"password",maxlength:"16",placeholder:"请再次输入密码",modelValue:k.formData.confirm,"onUpdate:modelValue":a[2]||(a[2]=e=>k.formData.confirm=e),required:""},null,8,["type","modelValue"]),r(V,{class:"img",src:this.visible2?"../../static/login/avisible.png":"../../static/login/invisible.png",onClick:w.changeView2},null,8,["src","onClick"])],2),d("div",{id:"gbutton"},[d("div",{id:"getcode"},[r(C,{class:"label"},{default:o((()=>[c("验证码：")])),_:1}),r(_,{type:"text",placeholder:"请输入验证码",class:"Input",modelValue:k.formData.verification,"onUpdate:modelValue":a[3]||(a[3]=e=>k.formData.verification=e),required:""},null,8,["modelValue"])]),r(D,{style:u({"background-color":k.active?"rgba(255,255,255,0.8)":"rgba(208, 202, 217, 1)"}),onClick:w.startTime},{default:o((()=>[c(h(k.getCodeText),1)])),_:1},8,["style","onClick"])]),d("div",{class:"buttonGroup"},[r(x,{class:m({active:w.isFill,inactive:!w.isFill}),disabled:!w.isFill,type:"submit",onClick:w.changepasswd},{default:o((()=>[c("修改密码")])),_:1},8,["class","disabled","onClick"]),r(x,{onClick:w.Login,class:"link"},{default:o((()=>[c("立即登录")])),_:1},8,["onClick"])])])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-5199e20f"]]);export{w as default};
